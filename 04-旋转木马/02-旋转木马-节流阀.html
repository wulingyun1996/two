<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>旋转木马轮播图</title>
  <link rel="stylesheet" href="css/css.css"/>
</head>
<body>
<div class="wrap" id="wrap">
  <div class="slide" id="slide">
    <ul>
      <li><a href="#"><img src="images/slidepic1.jpg" alt=""/></a></li>
      <li><a href="#"><img src="images/slidepic2.jpg" alt=""/></a></li>
      <li><a href="#"><img src="images/slidepic3.jpg" alt=""/></a></li>
      <li><a href="#"><img src="images/slidepic4.jpg" alt=""/></a></li>
      <li class="one"><a href="#"><img src="images/slidepic5.jpg" alt=""/></a></li>
    </ul>
    <div class="arrow" id="arrow">
      <a href="javascript:;" class="prev" id="arrLeft"></a>
      <a href="javascript:;" class="next" id="arrRight"></a>
    </div>
  </div>
</div>


<script src="animate-final.js"></script>
<script>

  //存储了5个li的位置
  var datas = [
    {
      "width": 400,
      "top": 20,
      "left": 50,
      "opacity": 0.2,
      "zIndex": 2
    },//0
    {
      "width": 600,
      "top": 70,
      "left": 0,
      "opacity": 0.8,
      "zIndex": 3
    },//1
    {
      "width": 800,
      "top": 100,
      "left": 200,
      "opacity": 1,
      "zIndex": 4
    },//2
    {
      "width": 600,
      "top": 70,
      "left": 600,
      "opacity": 0.8,
      "zIndex": 3
    },//3
    {
      "width": 400,
      "top": 20,
      "left": 750,
      "opacity": 0.2,
      "zIndex": 2
    }//4
  ];


  //1. 各就各位，页面加载的时候，需要给每一个li都做动画
  var lis = document.querySelectorAll("#wrap li");
  var wrap = document.querySelector("#wrap");
  var arrow = document.querySelector(".arrow");
  var arrLeft = document.querySelector("#arrLeft");
  var arrRight = document.querySelector("#arrRight");

  var flag = true;


  for(var i = 0; i < lis.length; i++) {
    animate(lis[i], datas[i]);
  }

  //2. 当鼠标经过大盒子的时候，需要把箭头的opacity改成1
  wrap.onmouseover = function () {
    animate(arrow, {opacity: 1});
  }

  //3. 当鼠标离开盒子的时候，把就箭头的opacity改成0
  wrap.onmouseout = function () {
    animate(arrow, {opacity: 0});
  }

  //4. 点击右箭头
  arrRight.onclick = function () {
    //判断标记是否是true
    if(flag) {
      flag = false;//修改标记,目的是，不允许执行其他操作。
      datas.unshift(datas.pop());
      for(var i = 0; i < lis.length; i++) {
        animate(lis[i], datas[i], function () {
          flag = true;
        });
      }
    }
  }

  //5. 点击左箭头
  arrLeft.onclick = function () {
    if(flag) {
      flag = false;
      //把数组中的位置进行交换，把数组的最后一个放到第一个
      datas.push( datas.shift() );
      //重新分配位置
      for(var i = 0; i < lis.length; i++) {
        animate(lis[i], datas[i], function () {
          flag = true;
        });
      }
    }

  }


  //100个错误

</script>
</body>
</html>